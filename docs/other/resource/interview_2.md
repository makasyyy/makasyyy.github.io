# 前端性能优化
## 怎么测量 谷歌-火焰图，官方lighthouse web page test
## 1.图片优化
1. 选择合适的图片格式
2. 压缩图片 png-node-pngquant-native 压缩jpg-jpegtron 压缩gif-gifsicle
3. 图片优化方案
   1. 使用iconfont
   2. 使用base64-webpack自带的包可以配置-一般都是后端转
   3. 使用雪碧图
   4. 使用cdn图片-这个要看一下，肯定要上，为了效果
   5. 懒加载
   6. 预加载
   7. 渐进式图片-刚开始只加载一个像素比较模糊的图片（体积比较小的）
   
## 2.html代码优化-影响不大
1. 前端html代码
2. 文件放在合适位置
## 3.css代码优化-影响不大
1. 提交文件加载性能-使用外链 尽量避免使用@import,可能会造成白屏，影响css文件的加载速度
2. 精简css代码
   1. 利用css继承减少代码量
   2. 避免使用复杂的选择器，层级越少越好
## 4.字体文件优化-不咋用
1. cdn加载字体文件
2. gzip压缩字体文件
3. 通过font-display-调整加载顺序
4. 字体裁剪，删除不需要的
5. 内联字体
## 5.js代码优化
## 6.webpack打包优化-重要且常见
1. 优化构建速度-第一次启动到打开网页，7.8秒以上肯定要优化
   1. 升级新版本
   2. 优化搜索文件
      1. 缩小文件的搜索范围：
         1. 合理使用resolve功能，resolve.alias.resolve.extensions,resolve.modules等
         2. 配置loader时，使用test，exclude，include缩小搜索范围
      2. 对匹配的文件进行分析，转化：
         1. module.noParse,告诉webpack不必解析哪些文件，可以用来排除对非模块化库文件的解析
      3. DllPlugin和DllReferencePlugin避免重复编译第三方库-比如lodash-react-dom
      4. 使用HappyPack开启多进程Loader转换
         1. loader对文件的转换操作太耗时，js是单线程模型，只能一个一个文件进行处理，需要通过
         2. happypack将任务分解成多个子进程，最后将结果发给主进程，并行处理
      5. 使用ParallelUglifyPlugin开启多进程压缩js文件
         1. 它可以开启多个子进程，每个子进程使用UglifyJS压缩代码，可以并行执行，能显著压缩时间
2. 优化开发体验-开启模块热替换HMR-只重新编译发生改变的模块
3. 优化输出质量-压缩文件体积
   1. 通过DEfinePlugin区分环境，减少生产环境代码体积
   2. 压缩资源 js/css/图片
   3. tree shaking-删除js无用代码-分析import/exports依赖关系，对于没有用的，会自动删除
   4. 分离第三方库文件-通过externals，将第三方库使用cdn加载，而不是打包到bundle中-缺点：组件库按需加载能力无法支持，不会有treeshaking。通过SplitChunksPlugin
   5. gzip压缩-compression-webpack-plugin
## 7. 页面静态化(SSR)
1. 为什么？
   1. 提高页面访问速度，降低服务器负担，因为访问时不需要每次去访问数据库
   2. 单页面应用的seo不好
   3. 页面稳定性-如果后端接口出现问题，页面还会有缓存，不会出问题
2. 有啥问题
   1. 服务器存储占用问题，因为页面量级增加，要占用更大硬盘控件
   2. 静态页面中的链接更新问题会有死链接或错误链接问题-解决方案：利用模板字符串，进行动态替换
3. 使用场景
   1. 首屏优化
## 8. 页面加载策略优化
1. 网络请求优化：减少网络资源的请求和加载耗时
   1. 预加载
      1. preload-提前下载资源
      2. prefetch-跟preload都是提前下载，有区别
      3. dns-prefetch-预解析
      4. preconnect-跟3很像，还会建立tcp握手连接和tls协议
   2. 开启gzip
   3. cdn
   4. 预渲染
   5. 使用http/2，http/3提升资源请求速度
   6. 资源请求合并，减少http请求
   7. 合理使用defer，async
2. 首屏加载优化
   1. 对页面内容进行分片/分屏加载
   2. 懒加载- 监听scroll事件/使用IntersectionObserver
   3. 楼层式记载-京东首页-存到localstorage？？？
      1. 楼层数据异步加载和本地缓存相结合的方式
      2. 在页面上放md5值，用来判断是使用接口数据还是缓存数据。进入页面后，将数据请求回来后，进行缓存，对楼层分别判断是使用接口数据还是缓存数据
   4. 首屏只加载需要的资源，对于不需要的资源不加载
   5. ssr--首屏终极方案-但是改造比较大，有的公司没用
   6. 客户端离线包方案-这个方案也非常好
   7. 客户端进行预请求和预记载
3. 渲染过程优化：减少用户操作等待时间
   1. 按需加载
   2. 减少回流和重绘
   3. 减少/合并dom操作，减少浏览器的计算损耗
4. 浏览器运算逻辑优化
   1. 拆解长任务，避免出现长时间计算导致页面卡顿
   2. 提前将计算结果缓存
5. 关键渲染路径优化
   1. 浏览器将html，css，js转换为屏幕上呈现的实际像素这一期间所经历的一系列步骤
   2. css的link标签放在head之间
   3. script标签放在</body>之前
## 9. 接口优化
## 10.webview性能优化-常见面试题 -hybrid app
## 11.html5离线化
## 12.浏览器缓存优化
## 13.如何配置cdn缓存
## 14.dns优化